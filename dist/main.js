(()=>{"use strict";const e=function({timing:e,draw:t,duration:o}){const n=performance.now();requestAnimationFrame((function c(a){let r=(a-n)/o;r>1&&(r=1);const l=e(r);t(l),r<1&&requestAnimationFrame(c)}))};(e=>{const t=document.querySelector("#timer-hours"),o=document.querySelector("#timer-minutes"),n=document.querySelector("#timer-seconds");function c(e){return(e=String(e)).length<2?"0"+e:e}let a;a=setInterval((function(){const e=function(){const e=(new Date("10 march 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),o=Math.floor(e/60%60);return{timeRemaining:e,hours:Math.floor(e/60/60),minutes:o,seconds:t}}();t.textContent=c(e.hours),o.textContent=c(e.minutes),n.textContent=c(e.seconds),e.timeRemaining<0&&(clearInterval(a),t.textContent="00",o.textContent="00",n.textContent="00")}),1e3)})(),(()=>{const e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item").length;for(let o=0;o<t;o++){const t=document.createElement("li");t.classList.add("dot"),0===o&&t.classList.add("dot-active"),e.appendChild(t)}})(),(()=>{const e=document.querySelector("menu"),t=document.querySelector(".close-btn"),o=document.querySelectorAll("ul>li>a"),n=document.querySelector("main>a"),c=document.querySelector("main>a>img"),a=document.querySelector("body"),r=()=>{e.classList.toggle("active-menu")};a.addEventListener("click",(a=>{const l=a.target;l.closest(".menu")?r():!e.matches(".active-menu")||l.matches("menu")||l.matches("a")||l.matches("li")?l===t?r():l===c?(a.preventDefault(),document.querySelector(n.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"nearest"})):o.forEach((e=>{if(l===e){r(),a.preventDefault();const t=e.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})}})):r()}))})(),(()=>{const t=document.querySelector(".popup"),o=document.querySelectorAll(".popup-btn"),n=()=>{screen.width>768?(e({duration:150,timing:e=>e,draw(e){t.style.opacity=1-e}}),setTimeout((()=>t.style.display="none"),600)):t.style.display="none"};o.forEach((o=>o.addEventListener("click",(()=>{screen.width>768?(t.style.display="block",e({duration:150,timing:e=>e,draw(e){t.style.opacity=e}})):t.style.display="block"})))),t.addEventListener("click",(e=>{let t=e.target;t.classList.contains("popup-close")?n():(t=t.closest(".popup-content"),t||n())}))})(),(()=>{const e=document.querySelector(".service-header"),t=e.querySelectorAll(".service-header-tab"),o=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let n=e.target;n=n.closest(".service-header-tab"),n&&t.forEach(((e,c)=>{e===n&&(e=>{for(let n=0;n<o.length;n++)e===n?(t[n].classList.add("active"),o[n].classList.remove("d-none")):(t[n].classList.remove("active"),o[n].classList.add("d-none"))})(c)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=document.querySelectorAll(".dot"),o=document.querySelector(".portfolio-content");let n,c=0;const a=(e,t,o)=>{e[t].classList.remove(o)},r=(e,t,o)=>{e[t].classList.add(o)},l=()=>{a(e,c,"portfolio-item-active"),a(t,c,"dot-active"),c++,c>=e.length&&(c=0),r(e,c,"portfolio-item-active"),r(t,c,"dot-active")},s=(e=3e3)=>{n=setInterval(l,e)};o.addEventListener("click",(o=>{o.preventDefault();let n=o.target;n.matches(".portfolio-btn, .dot")&&(a(e,c,"portfolio-item-active"),a(t,c,"dot-active"),n.matches("#arrow-right")?c++:n.matches("#arrow-left")?c--:n.matches(".dot")&&t.forEach(((e,t)=>{e===n&&(c=t)})),c>=e.length?c=0:c<0&&(c=e.length-1),r(e,c,"portfolio-item-active"),r(t,c,"dot-active"))})),o.addEventListener("mouseover",(e=>{e.target.matches(".portfolio-btn, .dot")&&clearInterval(n)})),o.addEventListener("mouseout",(e=>{e.target.matches(".portfolio-btn, .dot")&&s()})),s()})(),(()=>{const e=document.querySelector(".command"),t=e.querySelectorAll("img[data-img]"),o=e=>{e.dataset.tmp?(e.dataset.img=e.src,e.src=e.dataset.tmp,e.dataset.tmp=""):(e.dataset.tmp=e.src,e.src=e.dataset.img,e.dataset.img=e.dataset.tmp)};e.addEventListener("mouseover",(e=>{const n=e.target;t.forEach((e=>{e===n&&o(n)}))})),e.addEventListener("mouseout",(e=>{const n=e.target;t.forEach((e=>{e===n&&o(n)}))}))})(),document.querySelectorAll('input[type="tel"]').forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^\d+]/,"").substr(0,13)}))})),document.querySelectorAll(".form-name").forEach((e=>{e.addEventListener("input",(()=>{e.value=e.value.replace(/[^а-яё ]/i,"")}))})),document.querySelector(".mess").addEventListener("input",(e=>e.target.value=e.target.value.replace(/[^а-яё ,;:.\d?!+-]/i,""))),document.querySelector(".calc-block").addEventListener("click",(e=>{const t=e.target;t.matches(".calc-item")&&!t.matches(".calc-type")&&t.addEventListener("input",(e=>{const t=e.target;t.value=t.value.replace(/[^\d]/,"")}))})),((t=100)=>{const o=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),c=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),l=document.querySelector("#total");o.addEventListener("change",(o=>{o.target.matches(".calc-type, .calc-square, .calc-day, .calc-count")&&(()=>{let o=0,s=1,i=1;const d=n.options[n.selectedIndex].value,u=+c.value;if(""===d)return c.value="",r.value="",a.value="",void(l.textContent=0);r.value>1&&(s+=(r.value-1)/10),a.value&&a.value<5?i*=2:a.value&&a.value<10&&(i*=1.5),d&&u&&(o=t*d*u*s*i),e({duration:1e3,timing:e=>e,draw(e){l.textContent=Math.ceil(e*o)}})})()}))})(),(()=>{const e=document.querySelectorAll("form"),t=document.createElement("div"),o=document.createElement("div");o.classList.add("sk-spinner-pulse"),o.classList.add("d-none"),t.style.color="white",e.forEach((n=>{n.addEventListener("submit",(c=>{if(c.preventDefault(),n.appendChild(o),o.classList.remove("d-none"),n.appendChild(t),!(e=>[...e.elements].filter((e=>e.matches('[type="tel"]')?/[\d+]{7,13}/.test(e.value):e.matches('[type="email"]')?/([a-z])|.+@.+\..+/i.test(e.value):e)).length===[...e.elements].length)(n))return t.textContent="Проверьте корректность данных формы",o.classList.add("d-none"),void setTimeout((()=>t.textContent=""),2e3);const a=new FormData(n),r={};a.forEach(((e,t)=>{r[t]=e})),(e=>fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))(r).then((e=>{if(200!==e.status)throw new Error("error");o.classList.add("d-none"),t.textContent="Спасибо! Мы скоро с вами свяжемся"})).catch((e=>{o.classList.add("d-none"),t.textContent="Что-то пошло не так",console.error(e)})).finally((()=>{e.forEach((e=>[...e.elements].forEach((e=>e.value="")))),c.target.closest(".popup")?setTimeout((()=>{const e=document.querySelector(".popup-close");t.textContent="",e.click()}),2e3):(o.classList.add("d-none"),setTimeout((()=>t.textContent=""),2e3))}))}))}))})()})();