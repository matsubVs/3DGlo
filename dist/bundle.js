(()=>{"use strict";const e=function(e){var t=e.timing,n=e.draw,r=e.duration,o=performance.now();requestAnimationFrame((function e(c){var a=(c-o)/r;a>1&&(a=1);var i=t(a);n(i),a<1&&requestAnimationFrame(e)}))};function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,c,a,i,u,l,s,d,m,f,v,p,y,h,g,S,b,q,E,L,A,w,C,x,k,I,T,j;(function(e){var t,n=document.querySelector("#timer-hours"),r=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function c(e){return(e=String(e)).length<2?"0"+e:e}function a(){var e,a,i,u=(e=(new Date("10 march 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(e%60),i=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:i,seconds:a});n.textContent=c(u.hours),r.textContent=c(u.minutes),o.textContent=c(u.seconds),u.timeRemaining<0&&(clearInterval(t),n.textContent="00",r.textContent="00",o.textContent="00")}a(),t=setInterval(a,1e3)})(),function(){for(var e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item").length,n=0;n<t;n++){var r=document.createElement("li");r.classList.add("dot"),0===n&&r.classList.add("dot-active"),e.appendChild(r)}}(),w=document.querySelector("menu"),C=document.querySelector(".close-btn"),x=document.querySelectorAll("ul>li>a"),k=document.querySelector("main>a"),I=document.querySelector("main>a>img"),T=document.querySelector("body"),j=function(){w.classList.toggle("active-menu")},T.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")?j():!w.matches(".active-menu")||t.matches("menu")||t.matches("a")||t.matches("li")?t===C?j():t===I?(e.preventDefault(),document.querySelector(k.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"nearest"})):x.forEach((function(n){if(t===n){j(),e.preventDefault();var r=n.getAttribute("href");document.querySelector(r).scrollIntoView({behavior:"smooth",block:"start"})}})):j()})),E=document.querySelector(".popup"),L=document.querySelectorAll(".popup-btn"),A=function(){screen.width>768?(e({duration:150,timing:function(e){return e},draw:function(e){E.style.opacity=1-e}}),setTimeout((function(){return E.style.display="none"}),600)):E.style.display="none"},L.forEach((function(t){return t.addEventListener("click",(function(){screen.width>768?(E.style.display="block",e({duration:150,timing:function(e){return e},draw:function(e){E.style.opacity=e}})):E.style.display="block"}))})),E.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?A():(t=t.closest(".popup-content"))||A()})),S=document.querySelector(".service-header"),b=S.querySelectorAll(".service-header-tab"),q=document.querySelectorAll(".service-tab"),S.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&b.forEach((function(e,n){e===t&&function(e){for(var t=0;t<q.length;t++)e===t?(b[t].classList.add("active"),q[t].classList.remove("d-none")):(b[t].classList.remove("active"),q[t].classList.add("d-none"))}(n)}))})),d=document.querySelectorAll(".portfolio-item"),m=document.querySelectorAll(".dot"),f=document.querySelector(".portfolio-content"),v=0,p=function(e,t,n){e[t].classList.remove(n)},y=function(e,t,n){e[t].classList.add(n)},h=function(){p(d,v,"portfolio-item-active"),p(m,v,"dot-active"),++v>=d.length&&(v=0),y(d,v,"portfolio-item-active"),y(m,v,"dot-active")},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;s=setInterval(h,e)},f.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(p(d,v,"portfolio-item-active"),p(m,v,"dot-active"),t.matches("#arrow-right")?v++:t.matches("#arrow-left")?v--:t.matches(".dot")&&m.forEach((function(e,n){e===t&&(v=n)})),v>=d.length?v=0:v<0&&(v=d.length-1),y(d,v,"portfolio-item-active"),y(m,v,"dot-active"))})),f.addEventListener("mouseover",(function(e){e.target.matches(".portfolio-btn, .dot")&&clearInterval(s)})),f.addEventListener("mouseout",(function(e){e.target.matches(".portfolio-btn, .dot")&&g()})),g(),i=document.querySelector(".command"),u=i.querySelectorAll("img[data-img]"),l=function(e){e.dataset.tmp?(e.dataset.img=e.src,e.src=e.dataset.tmp,e.dataset.tmp=""):(e.dataset.tmp=e.src,e.src=e.dataset.img,e.dataset.img=e.dataset.tmp)},i.addEventListener("mouseover",(function(e){var t=e.target;u.forEach((function(e){e===t&&l(t)}))})),i.addEventListener("mouseout",(function(e){var t=e.target;u.forEach((function(e){e===t&&l(t)}))})),document.querySelectorAll('input[type="tel"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d+]/,"").substr(0,13)}))})),document.querySelectorAll('input[name="user_name"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яё ]/i,"")}))})),document.querySelector(".mess").addEventListener("input",(function(e){return e.target.value=e.target.value.replace(/[^а-яё ,;:.\d?!+-]/i,"")})),document.querySelector(".calc-block").addEventListener("click",(function(e){var t=e.target;t.matches(".calc-item")&&!t.matches(".calc-type")&&t.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^\d]/,"")}))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),i=document.querySelector("#total"),u=function(){var n=0,u=1,l=1,s=r.options[r.selectedIndex].value,d=+o.value;if(""===s)return o.value="",a.value="",c.value="",void(i.textContent=0);a.value>1&&(u+=(a.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),s&&d&&(n=t*s*d*u*l),e({duration:1e3,timing:function(e){return e},draw:function(e){i.textContent=Math.ceil(e*n)}})};n.addEventListener("change",(function(e){e.target.matches(".calc-type, .calc-square, .calc-day, .calc-count")&&u()}))}(),o=document.querySelectorAll("form"),c=document.createElement("div"),(a=document.createElement("div")).classList.add("sk-spinner-pulse"),a.classList.add("d-none"),c.style.color="white",o.forEach((function(e){e.addEventListener("submit",(function(n){if(n.preventDefault(),e.appendChild(a),a.classList.remove("d-none"),e.appendChild(c),!function(e){return t(e.elements).filter((function(e){return e.matches('[type="tel"]')?/[\d+]{7,13}/.test(e.value):e.matches('[type="email"]')?/([a-z])|.+@.+\..+/i.test(e.value):e.matches("[name=user_name]")?/.{2,}/.test(e.value):e.matches("[name=user_message]")?""!==e.value:e})).length===t(e.elements).length}(e))return c.textContent="Проверьте корректность данных формы",a.classList.add("d-none"),void setTimeout((function(){return c.textContent=""}),2e3);var i=new FormData(e),u={};i.forEach((function(e,t){u[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(u).then((function(e){if(200!==e.status)throw new Error("error");a.classList.add("d-none"),c.textContent="Спасибо! Мы скоро с вами свяжемся"})).catch((function(e){a.classList.add("d-none"),c.textContent="Что-то пошло не так",console.error(e)})).finally((function(){o.forEach((function(e){return(t=e.elements,function(e){if(Array.isArray(e))return r(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return e.value=""}));var t})),n.target.closest(".popup")?setTimeout((function(){var e=document.querySelector(".popup-close");c.textContent="",e.click()}),2e3):(a.classList.add("d-none"),setTimeout((function(){return c.textContent=""}),2e3))}))}))}))})();