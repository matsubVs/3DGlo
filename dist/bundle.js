(()=>{"use strict";const t=function(t){var e=t.timing,n=t.draw,r=t.duration,o=performance.now();requestAnimationFrame((function t(c){var a=(c-o)/r;a>1&&(a=1);var i=e(a);n(i),a<1&&requestAnimationFrame(t)}))};function e(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o,c,a,i,u,l,s,d,m,f,v,p,y,h,g,S,b,q,E,L,A,w,C,x,k,I,T,j;(function(t){var e,n=document.querySelector("#timer-hours"),r=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function c(t){return(t=String(t)).length<2?"0"+t:t}function a(){var t,a,i,u=(t=(new Date("10 march 2021").getTime()-(new Date).getTime())/1e3,a=Math.floor(t%60),i=Math.floor(t/60%60),{timeRemaining:t,hours:Math.floor(t/60/60),minutes:i,seconds:a});n.textContent=c(u.hours),r.textContent=c(u.minutes),o.textContent=c(u.seconds),u.timeRemaining<0&&(clearInterval(e),n.textContent="00",r.textContent="00",o.textContent="00")}a(),e=setInterval(a,1e3)})(),function(){for(var t=document.querySelector(".portfolio-dots"),e=document.querySelectorAll(".portfolio-item").length,n=0;n<e;n++){var r=document.createElement("li");r.classList.add("dot"),0===n&&r.classList.add("dot-active"),t.appendChild(r)}}(),w=document.querySelector("menu"),C=document.querySelector(".close-btn"),x=document.querySelectorAll("ul>li>a"),k=document.querySelector("main>a"),I=document.querySelector("main>a>img"),T=document.querySelector("body"),j=function(){w.classList.toggle("active-menu")},T.addEventListener("click",(function(t){var e=t.target;e.closest(".menu")?j():!w.matches(".active-menu")||e.matches("menu")||e.matches("a")||e.matches("li")?e===C?j():e===I?(t.preventDefault(),document.querySelector(k.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"nearest"})):x.forEach((function(n){if(e===n){j(),t.preventDefault();var r=n.getAttribute("href");document.querySelector(r).scrollIntoView({behavior:"smooth",block:"start"})}})):j()})),E=document.querySelector(".popup"),L=document.querySelectorAll(".popup-btn"),A=function(){screen.width>768?(t({duration:150,timing:function(t){return t},draw:function(t){E.style.opacity=1-t}}),setTimeout((function(){return E.style.display="none"}),600)):E.style.display="none"},L.forEach((function(e){return e.addEventListener("click",(function(){screen.width>768?(E.style.display="block",t({duration:150,timing:function(t){return t},draw:function(t){E.style.opacity=t}})):E.style.display="block"}))})),E.addEventListener("click",(function(t){var e=t.target;e.classList.contains("popup-close")?A():(e=e.closest(".popup-content"))||A()})),S=document.querySelector(".service-header"),b=S.querySelectorAll(".service-header-tab"),q=document.querySelectorAll(".service-tab"),S.addEventListener("click",(function(t){var e=t.target;(e=e.closest(".service-header-tab"))&&b.forEach((function(t,n){t===e&&function(t){for(var e=0;e<q.length;e++)t===e?(b[e].classList.add("active"),q[e].classList.remove("d-none")):(b[e].classList.remove("active"),q[e].classList.add("d-none"))}(n)}))})),d=document.querySelectorAll(".portfolio-item"),m=document.querySelectorAll(".dot"),f=document.querySelector(".portfolio-content"),v=0,p=function(t,e,n){t[e].classList.remove(n)},y=function(t,e,n){t[e].classList.add(n)},h=function(){p(d,v,"portfolio-item-active"),p(m,v,"dot-active"),++v>=d.length&&(v=0),y(d,v,"portfolio-item-active"),y(m,v,"dot-active")},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;s=setInterval(h,t)},f.addEventListener("click",(function(t){t.preventDefault();var e=t.target;e.matches(".portfolio-btn, .dot")&&(p(d,v,"portfolio-item-active"),p(m,v,"dot-active"),e.matches("#arrow-right")?v++:e.matches("#arrow-left")?v--:e.matches(".dot")&&m.forEach((function(t,n){t===e&&(v=n)})),v>=d.length?v=0:v<0&&(v=d.length-1),y(d,v,"portfolio-item-active"),y(m,v,"dot-active"))})),f.addEventListener("mouseover",(function(t){t.target.matches(".portfolio-btn, .dot")&&clearInterval(s)})),f.addEventListener("mouseout",(function(t){t.target.matches(".portfolio-btn, .dot")&&g()})),g(),i=document.querySelector(".command"),u=i.querySelectorAll("img[data-img]"),l=function(t){t.dataset.tmp?(t.dataset.img=t.src,t.src=t.dataset.tmp,t.dataset.tmp=""):(t.dataset.tmp=t.src,t.src=t.dataset.img,t.dataset.img=t.dataset.tmp)},i.addEventListener("mouseover",(function(t){var e=t.target;u.forEach((function(t){t===e&&l(e)}))})),i.addEventListener("mouseout",(function(t){var e=t.target;u.forEach((function(t){t===e&&l(e)}))})),document.querySelectorAll('input[type="tel"]').forEach((function(t){t.addEventListener("input",(function(){t.value=t.value.replace(/[^\d+]/,"").substr(0,13)}))})),document.querySelectorAll(".form-name").forEach((function(t){t.addEventListener("input",(function(){t.value=t.value.replace(/[^а-яё ]/i,"")}))})),document.querySelector(".mess").addEventListener("input",(function(t){return t.target.value=t.target.value.replace(/[^а-яё ,;:.\d?!+-]/i,"")})),document.querySelector(".calc-block").addEventListener("click",(function(t){var e=t.target;e.matches(".calc-item")&&!e.matches(".calc-type")&&e.addEventListener("input",(function(t){var e=t.target;e.value=e.value.replace(/[^\d]/,"")}))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),c=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),i=document.querySelector("#total"),u=function(){var n=0,u=1,l=1,s=r.options[r.selectedIndex].value,d=+o.value;if(""===s)return o.value="",a.value="",c.value="",void(i.textContent=0);a.value>1&&(u+=(a.value-1)/10),c.value&&c.value<5?l*=2:c.value&&c.value<10&&(l*=1.5),s&&d&&(n=e*s*d*u*l),t({duration:1e3,timing:function(t){return t},draw:function(t){i.textContent=Math.ceil(t*n)}})};n.addEventListener("change",(function(t){t.target.matches(".calc-type, .calc-square, .calc-day, .calc-count")&&u()}))}(),o=document.querySelectorAll("form"),c=document.createElement("div"),(a=document.createElement("div")).classList.add("sk-spinner-pulse"),a.classList.add("d-none"),c.style.color="white",o.forEach((function(t){t.addEventListener("submit",(function(n){if(n.preventDefault(),t.appendChild(a),a.classList.remove("d-none"),t.appendChild(c),!function(t){return e(t.elements).filter((function(t){return t.matches('[type="tel"]')?/[\d+]{7,13}/.test(t.value):t.matches('[type="email"]')?/([a-z])|.+@.+\..+/i.test(t.value):t})).length===e(t.elements).length}(t))return c.textContent="Проверьте корректность данных формы",a.classList.add("d-none"),void setTimeout((function(){return c.textContent=""}),2e3);var i=new FormData(t),u={};i.forEach((function(t,e){u[e]=t})),function(t){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}(u).then((function(t){if(200!==t.status)throw new Error("error");a.classList.add("d-none"),c.textContent="Спасибо! Мы скоро с вами свяжемся"})).catch((function(t){a.classList.add("d-none"),c.textContent="Что-то пошло не так",console.error(t)})).finally((function(){o.forEach((function(t){return(e=t.elements,function(t){if(Array.isArray(t))return r(t)}(e)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(t){return t.value=""}));var e})),n.target.closest(".popup")?setTimeout((function(){var t=document.querySelector(".popup-close");c.textContent="",t.click()}),2e3):(a.classList.add("d-none"),setTimeout((function(){return c.textContent=""}),2e3))}))}))}))})();