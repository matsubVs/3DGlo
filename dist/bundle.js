(()=>{"use strict";const e=function(e){var t=e.timing,n=e.draw,r=e.duration,o=performance.now();requestAnimationFrame((function e(a){var c=(a-o)/r;c>1&&(c=1);var u=t(c);n(u),c<1&&requestAnimationFrame(e)}))};function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o,a,c,u,i,l,s,d,m,f,v,y,p,h,g,S,b,q,E;(function(e){var t,n=document.querySelector("#timer-hours"),r=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function a(e){return(e=String(e)).length<2?"0"+e:e}function c(){var e,c,u,i=(e=(new Date("10 march 2021").getTime()-(new Date).getTime())/1e3,c=Math.floor(e%60),u=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:u,seconds:c});n.textContent=a(i.hours),r.textContent=a(i.minutes),o.textContent=a(i.seconds),i.timeRemaining<0&&(clearInterval(t),n.textContent="00",r.textContent="00",o.textContent="00")}c(),t=setInterval(c,1e3),c()})(),function(){for(var e=document.querySelector(".portfolio-dots"),t=document.querySelectorAll(".portfolio-item").length,n=0;n<t;n++){var r=document.createElement("li");r.classList.add("dot"),0===n&&r.classList.add("dot-active"),e.appendChild(r)}}(),p=document.querySelector("menu"),h=document.querySelector(".close-btn"),g=document.querySelectorAll("ul>li>a"),S=document.querySelector("main>a"),b=document.querySelector("main>a>img"),q=document.querySelector("body"),E=function(){p.classList.toggle("active-menu")},q.addEventListener("click",(function(e){var t=e.target;t.closest(".menu")?E():!p.matches(".active-menu")||t.matches("menu")||t.matches("a")||t.matches("li")?t===h?E():t===b?(e.preventDefault(),document.querySelector(S.getAttribute("href")).scrollIntoView({behavior:"smooth",block:"nearest"})):g.forEach((function(n){if(t===n){E(),e.preventDefault();var r=n.getAttribute("href");document.querySelector(r).scrollIntoView({behavior:"smooth",block:"start"})}})):E()})),f=document.querySelector(".popup"),v=document.querySelectorAll(".popup-btn"),y=function(){screen.width>768?(e({duration:150,timing:function(e){return e},draw:function(e){f.style.opacity=1-e}}),setTimeout((function(){return f.style.display="none"}),600)):f.style.display="none"},v.forEach((function(t){return t.addEventListener("click",(function(){screen.width>768?(f.style.display="block",e({duration:150,timing:function(e){return e},draw:function(e){f.style.opacity=e}})):f.style.display="block"}))})),f.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?y():(t=t.closest(".popup-content"))||y()})),s=document.querySelector(".service-header"),d=s.querySelectorAll(".service-header-tab"),m=document.querySelectorAll(".service-tab"),s.addEventListener("click",(function(e){var t=e.target;(t=t.closest(".service-header-tab"))&&d.forEach((function(e,n){e===t&&function(e){for(var t=0;t<m.length;t++)e===t?(d[t].classList.add("active"),m[t].classList.remove("d-none")):(d[t].classList.remove("active"),m[t].classList.add("d-none"))}(n)}))})),u=document.querySelector(".command"),i=u.querySelectorAll("img[data-img]"),l=function(e){e.dataset.tmp?(e.dataset.img=e.src,e.src=e.dataset.tmp,e.dataset.tmp=""):(e.dataset.tmp=e.src,e.src=e.dataset.img,e.dataset.img=e.dataset.tmp)},u.addEventListener("mouseover",(function(e){var t=e.target;i.forEach((function(e){e===t&&l(t)}))})),u.addEventListener("mouseout",(function(e){var t=e.target;i.forEach((function(e){e===t&&l(t)}))})),document.querySelectorAll('input[type="tel"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^\d+]/,"").substr(0,13)}))})),document.querySelectorAll('input[name="user_name"]').forEach((function(e){e.addEventListener("input",(function(){e.value=e.value.replace(/[^а-яё ]/i,"")}))})),document.querySelector(".mess").addEventListener("input",(function(e){return e.target.value=e.target.value.replace(/[^а-яё ,;:.\d?!+-]/i,"")})),document.querySelector(".calc-block").addEventListener("click",(function(e){var t=e.target;t.matches(".calc-item")&&!t.matches(".calc-type")&&t.addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/[^\d]/,"")}))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,n=document.querySelector(".calc-block"),r=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),c=document.querySelector(".calc-count"),u=document.querySelector("#total"),i=function(){var n=0,i=1,l=1,s=r.options[r.selectedIndex].value,d=+o.value;if(""===s)return o.value="",c.value="",a.value="",void(u.textContent=0);c.value>1&&(i+=(c.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),s&&d&&(n=t*s*d*i*l),e({duration:1e3,timing:function(e){return e},draw:function(e){u.textContent=Math.ceil(e*n)}})};n.addEventListener("change",(function(e){e.target.matches(".calc-type, .calc-square, .calc-day, .calc-count")&&i()}))}(),o=document.querySelectorAll("form"),a=document.createElement("div"),(c=document.createElement("div")).classList.add("sk-spinner-pulse"),c.classList.add("d-none"),a.style.color="white",o.forEach((function(e){e.addEventListener("submit",(function(n){if(n.preventDefault(),e.appendChild(c),c.classList.remove("d-none"),e.appendChild(a),!function(e){return t(e.elements).filter((function(e){return e.matches('[type="tel"]')?/[\d+]{7,13}/.test(e.value):e.matches('[type="email"]')?/([a-z])|.+@.+\..+/i.test(e.value):e.matches("[name=user_name]")?/.{2,}/.test(e.value):e.matches("[name=user_message]")?""!==e.value:e})).length===t(e.elements).length}(e))return a.textContent="Проверьте корректность данных формы",c.classList.add("d-none"),void setTimeout((function(){return a.textContent=""}),2e3);var u=new FormData(e),i={};u.forEach((function(e,t){i[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(i).then((function(e){if(200!==e.status)throw new Error("error");c.classList.add("d-none"),a.textContent="Спасибо! Мы скоро с вами свяжемся"})).catch((function(e){c.classList.add("d-none"),a.textContent="Что-то пошло не так",console.error(e)})).finally((function(){o.forEach((function(e){return(t=e.elements,function(e){if(Array.isArray(e))return r(e)}(t)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).forEach((function(e){return e.value=""}));var t})),n.target.closest(".popup")?setTimeout((function(){var e=document.querySelector(".popup-close");a.textContent="",e.click()}),2e3):(c.classList.add("d-none"),setTimeout((function(){return a.textContent=""}),2e3))}))}))}))})();